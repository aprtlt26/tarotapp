<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="main.js"></script>
    <script src="../lib/Tone.js"></script>
    <title>Tarot Synthesizer</title>
    
</head>
<body>
  <header>
    <div class="container">
          <img  src="images/TAROTLISTENING.jpg" width="400" height="100" /> 
          
         
    </header>


    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });

                // Si el usuario permite el uso del micrófono, aquí puedes realizar acciones con el stream obtenido.
                console.log("Permiso concedido para usar el micrófono.");
            } catch (error) {
                // Si el usuario deniega el permiso o no tiene un micrófono, aquí puedes mostrar una alerta o realizar otras acciones.
                console.error("El permiso para usar el micrófono fue denegado o no hay un micrófono disponible.");
            }
        });
    </script>


<div>

</div>



<div class="container">

    <p id="titulo">
        <p> <em>Select the specific date you want, it can be today's date, or the date of your birth, the date of your marriage, 
        etc. You will get 3 sound frequencies for meditation, dance, performance or simply deep listening.  </p>

    <div class="cartas">
    <div id="labesl_cartas">

   

    <div class="nombre_cartas">
      
        <div class="container">
    <img id ="carta3"src="0.jpeg" alt="" name ="dia"> 
   
    <img id ="carta2"src="0.jpeg" alt="" name ="mes">
   
    <img id ="carta1"src="0.jpeg" alt="" name="año">
   
   

    <div class="container"> 

        
    

  
    
    
    

<div class="audio">

  <audio src= "sonidos/" controls id="carta_1_a"  preload="auto" autoplay loop  ></audio>
  <audio src= "sonidos/" controls id="carta_2_a"  preload="auto" autoplay loop ></audio>
  <audio src= "sonidos/" controls id="carta_3_a"  preload="auto" autoplay loop  ></audio>
 <div> 
        </div>
     
</div>
<div class="datos">


<input id ="fecha"type="date" name value="date">
<button class="btn" onclick="tirar()">Listen</button>

<div class="container">

<img src="images/tarotwaves.jpg" width="800" height="450"  />
<img src="images/tablawaves.jpg" width="650" height="450"   />


</div>

<div class="copy">

   
    <img id ="carta4_1"src="0.jpeg" alt=""name="dia_1">
    <img id ="carta4_2"src="0.jpeg" alt=""name="mes_2">
    <img id ="carta4_3"src="0.jpeg" alt=""name="año_2">
    
   
    <div class="container">

    <p> <em> 

   
        The frequency tarot is an experience in deep listening, 
        sonomeditation, randomness, additive synthesis and 
        sonification.

        Each septenary corresponds to a waveform.
        you can control the volume of each sound and change the playback
        speed to get variations.
        <div>
        Contact me for a personalized reading. 

        

    </em>
</div>
</div>
        <div 
        
        class="container">

        <A HREF="https://aprtlt.wixsite.com/aprtlt/info" target=”_blank” > 
        
        <em>Alfonso Pretelt</em> </A>

    </em>
    
</div>
    

<div class="formulario" id ="form">
    
    <form action="https://formspree.io/f/xbjervwb" method="post">
        <label for="email">Email</label>
        
        <input type="email" name="email" id="email" placeholder= "aprtlt26@gmail.com">
        <output type="text" name= "text" id="text" placeholder>
        <label for="msg">Consulta:</label>
        <textarea id="msg" name="user_message"></textarea>
        <div> 
        <button type="submit" id="enviar">send</button>

        </div>

        <div class="container">

        </div>
 
   
</div>


<script>
    const socket = new WebSocket('ws://localhost:8080'); // Cambia la URL al servidor adecuado
    
    // Cuando el audio se reproduce, captura los datos y envíalos al servidor
    document.getElementById('carta_1_a').addEventListener('play', (event) => {
        const audioData = { type: 'audio', data: 'captura_de_audio_aqui' };
        socket.send(JSON.stringify(audioData));
    });
    
    document.getElementById('carta_2_a').addEventListener('play', (event) => {
        const audioData = { type: 'audio', data: 'captura_de_audio_aqui' };
        socket.send(JSON.stringify(audioData));
    });
    
    document.getElementById('carta_3_a').addEventListener('play', (event) => {
        const audioData = { type: 'audio', data: 'captura_de_audio_aqui' };
        socket.send(JSON.stringify(audioData));
    });
    </script>
    


    <script>


const $form=document.querySelector('#form');
$form.addEventListener('submit',handleSubmit);

async function handleSubmit(event)
    event.preventDefault();
    const form= new FormData(this);
    const response =await fetch(this.action,{
        method:this.method,
        body:form,
        headers:{
            "Accept": "aplication/jason"
        }

    })
    if (response.ok){
        this.reset()
        alert()
    }
    

  



src="script.js"

    </script>
</div>
</body>
</html>
